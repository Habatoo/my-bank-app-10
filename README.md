# My Bank App

![Java](https://img.shields.io/badge/Java-17-informational?logo=java)
![Postgres](https://img.shields.io/badge/PostgreSQL-17-informational?logo=postgresql)
![Docker](https://img.shields.io/badge/Docker-compose-blue?logo=docker)

## –û –ø—Ä–æ–µ–∫—Ç–µ
my-bank-app-10 ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, 
–ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ (Spring WebFlux). 
–°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å—Ä–µ–¥–µ.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–§–ò–û, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è) —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤–æ–∑—Ä–∞—Å—Ç–∞ (18+).
* –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∞–ª–∏—á–Ω–æ—Å—Ç—å—é (Cash): –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –≤–Ω–µ—Å–µ–Ω–∏–µ –∏ —Å–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞.
* –î–µ–Ω–µ–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (Transfer): –ü–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã.
* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ –∫–∞–∂–¥–æ–π —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
* Security: –ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ API —Å –ø–æ–º–æ—â—å—é Keycloak (OAuth 2.0 / OpenID Connect).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ Kubernetes (Minikube) –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Helm.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```declarative;
my-bank-app/
‚îú‚îÄ‚îÄ account/
‚îÇ   ‚îú‚îÄ‚îÄ main/                 # Application - @SpringBootApplication -jar –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ —Ä–∞–±–æ—Ç—ã —Å–æ —Å—á–µ—Ç–æ–º
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ db/changelog/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ Liquibase
‚îÇ   ‚îú‚îÄ‚îÄ integrationtests/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (Postgres)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è account
‚îú‚îÄ‚îÄ cash/
‚îÇ   ‚îú‚îÄ‚îÄ main/                 # Application - @SpringBootApplication -jar –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–Ω—è—Ç–∏—è —Å–æ —Å—á–µ—Ç–∞
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ db/changelog/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ Liquibase
‚îÇ   ‚îú‚îÄ‚îÄ integrationtests/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (Postgres)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è cash
‚îú‚îÄ‚îÄ documentation/            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–æ–¥—É–ª—è–º 
‚îú‚îÄ‚îÄ front-ui/
‚îÇ   ‚îú‚îÄ‚îÄ main/                 # Application - @SpringBootApplication -jar –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ —Ñ—Ä–æ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ integrationtests/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (Postgres)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è front-ui
‚îú‚îÄ‚îÄ gateway/
‚îÇ   ‚îú‚îÄ‚îÄ main/                 # Application - @SpringBootApplication -jar –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –≥–µ–π—Ç–≤–µ—è —Å —Ñ—Ä–æ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ integrationtests/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (Postgres)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è gateway
‚îú‚îÄ‚îÄ helm/                     # –ß–∞—Ä—Ç—ã Helm –¥–ª—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –≤ K8s
‚îú‚îÄ‚îÄ microservice-chases/
‚îú‚îÄ‚îÄ notification/
‚îÇ   ‚îú‚îÄ‚îÄ main/                 # Application - @SpringBootApplication -jar –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ db/changelog/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ Liquibase
‚îÇ   ‚îú‚îÄ‚îÄ integrationtests/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (Postgres)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è notification
‚îú‚îÄ‚îÄ transfer/
‚îÇ   ‚îú‚îÄ‚îÄ main/                 # Application - @SpringBootApplication -jar –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ db/changelog/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ Liquibase
‚îÇ   ‚îú‚îÄ‚îÄ integrationtests/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (Postgres)
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è transfer
‚îú‚îÄ‚îÄ deploy.ps1                # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ settings.gradle
```

---

## –ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Backend**: Java 17, Spring Boot, WebFlux, Project Reactor.
- **Database**: PostgreSQL (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞), Liquibase.
- **Infrastructure**: Kubernetes, Helm, Docker.
- **Security**: Keycloak (RBAC, OAuth2).
- **Testing**: JUnit 5, StepVerifier (–¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤), Testcontainers.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
   git clone -b feature/module_two_sprint_eight_branch https://github.com/Habatoo/my-bank-app-10.git
   cd my-bank-app-10
```

2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (Win)
<br>
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è - —Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã, –Ω–∞—Å—Ç—Ä–æ–∏—Ç Minikube –∏ –∑–∞–ø—É—Å—Ç–∏—Ç Helm-—á–∞—Ä—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
```bash

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process

# –ß–∏—Å—Ç—ã–π –∑–∞–ø—É—Å–∫ –≤ DEV —Å—Ä–µ–¥–µ (—É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–π Minikube –∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–π)
./deploy.ps1 -Environment dev -CleanStart

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ä–µ–¥—ã –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
./deploy.ps1 -Environment dev
```
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (Linux)
<br>
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è - —Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã, –Ω–∞—Å—Ç—Ä–æ–∏—Ç Minikube –∏ –∑–∞–ø—É—Å—Ç–∏—Ç Helm-—á–∞—Ä—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
```bash

chmod +x deploy.sh

# –ß–∏—Å—Ç—ã–π –∑–∞–ø—É—Å–∫ –≤ DEV —Å—Ä–µ–¥–µ (—É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–π Minikube –∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–π)
./deploy.sh dev --clean

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ä–µ–¥—ã –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
./deploy.sh dev
```
4. –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–î–ª—è –æ—Ç–ª–∞–¥–∫–∏)
<br>
- –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –ë–î: kubectl port-forward svc/bank-dev-account-db 5432:5432 -n dev
- –î–æ—Å—Ç—É–ø –∫ Keycloak: kubectl port-forward svc/keycloak 8080:8080 -n dev
- –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞: kubectl logs -l app=gateway -n dev


## –¢–µ—Å—Ç—ã
–ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ - –∑–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞ –∏ —Ç–µ—Å—Ç–æ–≤ Helm:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —á–∞—Ä—Ç–æ–≤
helm lint ./helm/my-bank -f ./helm/my-bank/values.yaml

# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
helm test bank-dev -n dev --logs
```

## –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- Front UI: http://my-bank (user/user, customer/customer)
- Keycloak: http://keycloak/admin/master/console/ (Admin: admin/admin)

## –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ, –µ–≥–æ API –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö:
<br><br>
üì¶ –ú–æ–¥—É–ª—å Accounts ‚Äî –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –±–∞–ª–∞–Ω—Å–æ–≤. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è account](./account/README.md)
<br>
üí∏ –ú–æ–¥—É–ª—å Cash ‚Äî –õ–æ–≥–∏–∫–∞ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è cash](./cash/README.md)
<br>
üîÑ –ú–æ–¥—É–ª—å Transfer ‚Äî –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è front-ui](./front-ui/README.md)
<br>
üîî –ú–æ–¥—É–ª—å Notifications ‚Äî –°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è transfer](./transfer/README.md)
<br>
üåê –ú–æ–¥—É–ª—å Gateway ‚Äî –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è gateway](./gateway/README.md)
<br>
üíª –ú–æ–¥—É–ª—å Front UI ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è front-ui](./front-ui/README.md)
<hr>
