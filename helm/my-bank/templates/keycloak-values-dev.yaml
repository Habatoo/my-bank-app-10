# keycloak-value
global:
  storageClass: standard

replicaCount: 1

production: false

auth:
  adminUser: admin
  existingSecret: keycloak-admin-secret
  existingSecretKey: admin-password

proxy: edge

httpRelativePath: "/"

service:
  type: ClusterIP
  ports:
    http: 8080

ingress:
  enabled: false

health:
  enabled: true

metrics:
  enabled: false

postgresql:
  enabled: true
  auth:
    username: keycloak
    database: keycloak
    password: keycloak
  primary:
    persistence:
      enabled: true
      size: 2Gi

# =========================
# ðŸ”‘ ÐšÐ›Ð®Ð§Ð•Ð’ÐÐ¯ Ð§ÐÐ¡Ð¢Ð¬
# =========================

extraStartupArgs: >-
  --start
  --import-realm
  --http-enabled=true
  --http-port=8080
  --https-port=-1
  --hostname-strict=false
  --hostname-strict-https=false
  --spi-theme-cache-themes=false
  --spi-theme-cache-templates=false

extraEnvVars:
  - name: KC_LOG_LEVEL
    value: INFO
  - name: JAVA_OPTS_APPEND
    value: "-Dkeycloak.import.strategy=OVERWRITE_EXISTING"


# Realm import
extraVolumes:
  - name: realm-import
    configMap:
      name: keycloak-realm-import

extraVolumeMounts:
  - name: realm-import
    mountPath: /opt/bitnami/keycloak/data/import
    readOnly: true
---
# Custom theme
extraVolumes:
  - name: realm-import
    configMap:
      name: keycloak-realm-import

  - name: theme-bank
    configMap:
      name: keycloak-theme-bank

extraVolumeMounts:
  - name: realm-import
    mountPath: /opt/bitnami/keycloak/data/import
    readOnly: true

  - name: theme-bank
    mountPath: /opt/bitnami/keycloak/themes/bank-theme
    readOnly: true
